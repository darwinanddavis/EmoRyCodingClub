y = .arr_delay,
group = date,color="purple")) + geom_line(show.legend=F) + theme_void()
p %>% prettify() # add calendar text
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date),color="purple") + geom_line(show.legend=F) + theme_void()
p %>% prettify() # add calendar text
p <- ggplot(fdf,aes(x = distance,
y = arr_delay,
group = date),color="purple") + geom_line(show.legend=F) + theme_void()
p %>% prettify() # add calendar text
p <- ggplot(fdf,aes(x = distance,
y = arr_delay,
group = date)) + geom_line(color="purple",show.legend=F) + theme_void()
p %>% prettify() # add calendar text
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date)) + geom_line(color="purple",show.legend=F) + theme_void()
p %>% prettify() # add calendar text
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date)) + geom_line(aes(color=arr_delay),show.legend=F) + theme_void()
p %>% prettify() # add calendar text
fdf %>% head
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date)) + geom_line(aes(color=date %>% as.factor()),show.legend=F) + theme_void()
p %>% prettify() # add calendar text
fdf %>% head
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,color=arr_delay)) + geom_line(show.legend=F) + theme_void()
p %>% prettify() # add calendar text
fdf$.arr_delay
fdf$.arr_delay %>% summary
fdf <- fdf %>%
mutate(.arr_delay = ifelse(.arr_delay<0,"orange","purple"))
fdf %>% head
fdf <- frame_calendar(ff,
x = distance,
y = arr_delay,
date = date,
nrow = 5)
fdf <- fdf %>%
mutate(colpal = ifelse(.arr_delay<0,"orange","purple"))
fdf %>% head
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,color=colpal)) + geom_line(show.legend=F) + theme_void()
p %>% prettify() # add calendar text
fdf %>% head
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date)) + geom_line(aes(color=colpal),show.legend=F) + theme_void()
p %>% prettify() # add calendar text
colpal
fdf$colpal %>% head
fdf$colpal
fdf$.arr_delay %>% head
fdf$.arr_delay %>% summary
fdf <- frame_calendar(ff,
x = distance,
y = arr_delay,
date = date,
nrow = 5)
fdf <- fdf %>%
mutate(colpal = ifelse(.arr_delay<0.5,"orange","purple"))
# plot
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
color=colpal)) + geom_line(,show.legend=F) + theme_void()
p %>% prettify() # add calendar text
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
color=colpal)) + geom_line(show.legend=F) + theme_void()
p %>% prettify() # add calendar text
fdf %>% unique
fdf$colpal %>% unique
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
color=colpal)) + geom_line(show.legend=T) + theme_void()
p %>% prettify() # add calendar text
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
color=colpal))
p
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
color=colpal)) + geom_line(show.legend=T)
p
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date),color=colpal) + geom_line(show.legend=T)
p
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,colour=distance)) + geom_line(show.legend=T) + theme_void()
p %>% prettify() # add calendar text
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
colour=.distance)) + geom_line(
) + theme_void()
p
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
colour=arr_delay)) + geom_line(show.legend=T) + theme_void()
p
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
colour=arr_delay)) +
scale_color_gradient2() +
geom_line(show.legend=F) + theme_void()
p %>% prettify() # add calendar text
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
colour=arr_delay)) +
scale_color_gradient2() +
geom_line(show.legend=T) + theme_void()
p %>% prettify() # add calendar text
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
colour=arr_delay)) +
scale_color_gradient() +
geom_line(show.legend=T) + theme_void()
p %>% prettify() # add calendar text
require(colorspace)
fdf <- fdf %>%
mutate(colpal = sequential_hcl(arr_delay))
sequential_hcl(fdf$arr_delay)
colorspace::swatchplot()
colorspace::sequential_hcl(palette = "Purple-Orange"")
)
"
colorspace::sequential_hcl(palette = "Purple-Orange")
fdf <- frame_calendar(ff,
x = distance,
y = arr_delay,
date = date,
nrow = 5)
fdf <- fdf %>%
mutate(colpal = sequential_hcl(arr_delay,"Purple-Orange")
)
fdf <- fdf %>%
mutate(colpal = sequential_hcl(n=arr_delay,"Purple-Orange")
)
fdf <- fdf %>%
mutate(colpal = sequential_hcl(n=arr_delay,"Purple-Orange")
)
fdf <- frame_calendar(ff,
x = distance,
y = arr_delay,
date = date,
nrow = 5)
fdf <- fdf %>%
mutate(colpal = sequential_hcl(n=arr_delay,"Purple-Orange")
)
fdf$arr_delay %>% length
fdf <- fdf %>%
mutate(colpal = sequential_hcl(11,"Purple-Orange")
)
fdf <- fdf %>%
mutate(colpal = sequential_hcl(arr_delay %>% length,"Purple-Orange")
)
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
colour=colpal)) +
scale_color_gradientn() +
geom_line(show.legend=T) + theme_void()
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date)) +
scale_color_gradientn(colpal) +
geom_line(show.legend=T) + theme_void()
fdf %>% head
fdf$colpal
fdf$colpal %>% unique
ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date)) +
scale_color_gradientn(colpal)
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date)) +
scale_color_gradientn(sequential_hcl(arr_delay %>% length,"Purple-Orange")) +
geom_line(show.legend=T) + theme_void()
ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date)) +
scale_color_gradientn(colours=colpal)
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
colour=colpal)) +
scale_color_gradientn(colours=colpal)
?scale_color_gradientn
colpal
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
colour=colpal)) +
scale_color_gradientn(colours=fdf$colpal)
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
colour=colpal)) +
scale_color_gradientn(colours=fdf$colpal) +
geom_line(show.legend=T) + theme_void()
p %>% prettify() # add calendar text
fdf$colpal
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
colour=colpal)) +
scale_color_gradientn(colours=magma(200)) +
geom_line(show.legend=T) + theme_void()
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
colour=colpal)) +
scale_color_gradientn(colours=terrain.colors(200)) +
geom_line(show.legend=T) + theme_void()
p %>% prettify() # add calendar text
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
# colour=colpal
)) +
scale_color_gradientn(colours=terrain.colors(200)) +
geom_line(show.legend=T) + theme_void()
p %>% prettify() # add calendar text
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
# colour=colpal
)) +
geom_line(show.legend=T) +
scale_color_gradientn(colours=terrain.colors(200)) +
theme_void()
p %>% prettify() # add calendar text
fdf$colpal %>% unique %>% length
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
colour=colpal
)) +
geom_line(show.legend=T)
p
ff <- flights %>%
mutate(date = time_hour %>% as.Date()) %>%
select(distance,arr_delay,date)
# make calendar df
fdf <- frame_calendar(ff,
x = distance,
y = arr_delay,
date = date,
nrow = 5)
# plot
p <- ggplot(fdf,aes(x = .distance,
y = .arr_delay,
group = date,
colour=colpal
)) +
geom_line(show.legend=T) +
theme_void()
p %>% prettify() # add calendar text
p <- ggplot(fdf,aes(x = .distance, # new calendar var
y = .arr_delay, # new calendar var
group = date,
colour=arr_delay
)) +
geom_line(show.legend=T) +
theme_void()
p %>% prettify() # add calendar text
rmarkdown::render_site()
pacman::p_load(maps,stringr,leaflet)
# get city names
data(world.cities) # /maps
world_cities <- world.cities
ot <- OlsonNames() %>% str_split_fixed("/",n = 2)  # sep country and cities
ot2 <- ot[,2] %>% str_replace_all("_"," ")
odf <- world_cities %>%
filter(name %in% ot2) %>%
select(lat = lat,
lon = long,
city = name)
# plot
leaflet() %>% addTiles() %>%
addMarkers(lng=odf$lon,lat=odf$lat,
label = paste0(odf$city,"</br>",
"Your current time =", now(), "</br>")) %>% leaflet::addProviderTiles("CartoDB")
# possible time zones to pass to the `tz=""` argument
odf[str_detect(OlsonNames(),ot[,2]),]
odf[complete.cases(odf[str_detect(OlsonNames(),ot[,2]),]),"city"]
pacman::p_load(maps,stringr,leaflet)
# get city names
data(world.cities) # /maps
world_cities <- world.cities
ot <- OlsonNames() %>% str_split_fixed("/",n = 2)  # sep country and cities
ot2 <- ot[,2] %>% str_replace_all("_"," ")
odf <- world_cities %>%
filter(name %in% ot2) %>%
select(lat = lat,
lon = long,
city = name)
# plot
leaflet() %>% addTiles() %>%
addMarkers(lng=odf$lon,lat=odf$lat,
label = paste(odf$city,"</br>",
"Your current time =", now(), "</br>")) %>% leaflet::addProviderTiles("CartoDB")
# possible time zones to pass to the `tz=""` argument
odf[str_detect(OlsonNames(),ot[,2]),]
odf[complete.cases(odf[str_detect(OlsonNames(),ot[,2]),]),"city"]
ot2
ot
ot2
odf <- world_cities %>%
filter(name %in% ot2) %>%
select(lat = lat,
lon = long,
city = name,
tz = now(tzone=ot2))
ot2
now(tzone = ot2)
ot2 %>% class
ot2
ot2[1]
now(tzone = ot2[1])
?now()
ot
now(OlsonNames[1])
now(OlsonNames()[1])
data(world.cities) # /maps
world_cities <- world.cities
ot <- OlsonNames() %>% str_split_fixed("/",n = 2)  # sep country and cities
ot2 <- ot[,2] %>% str_replace_all("_"," ")
odf <- world_cities %>%
filter(name %in% ot2) %>%
select(lat = lat,
lon = long,
city = name,
tz = now(OlsonNames()))
OlsonNames()
now(OlsonNames())
OlsonNames()
now(OlsonNames()[2])
now(OlsonNames()[200])
odf %>% lengths
ot
ot2 %>% str_which(OlsonNames())
OlsonNames() %>% str_which(ot2)
pacman::p_load(maps,stringr,leaflet)
# get city names
data(world.cities) # /maps
world_cities <- world.cities
ot <- OlsonNames() %>% str_split_fixed("/",n = 2)  # sep country and cities
ot2 <- ot[,2] %>% str_replace_all("_"," ")
odf <- world_cities %>%
filter(name %in% ot2) %>%
select(lat = lat,
lon = long,
city = name)
# plot
leaflet() %>% addTiles() %>%
addMarkers(lng=odf$lon,lat=odf$lat,
label = paste("City: ",odf$city) %>% leaflet::addProviderTiles("CartoDB")
# possible time zones to pass to the `tz=""` argument
odf[str_detect(OlsonNames(),ot[,2]),]
pacman::p_load(maps,stringr,leaflet)
# get city names
data(world.cities) # /maps
world_cities <- world.cities
ot <- OlsonNames() %>% str_split_fixed("/",n = 2)  # sep country and cities
ot2 <- ot[,2] %>% str_replace_all("_"," ")
odf <- world_cities %>%
filter(name %in% ot2) %>%
select(lat = lat,
lon = long,
city = name)
# plot
leaflet() %>% addTiles() %>%
addMarkers(lng=odf$lon,lat=odf$lat,
label = paste("City: ",odf$city)) %>% leaflet::addProviderTiles("CartoDB")
# possible time zones to pass to the `tz=""` argument
odf[str_detect(OlsonNames(),ot[,2]),]
odf[complete.cases(odf[str_detect(OlsonNames(),ot[,2]),]),"city"]
rmarkdown::render_site()
node("section") %>% html_nodes("a") %>% html_attr("href")
node("img")  %>% html_attr("src") %>% image_read()
require(dplyr)
node("img") %>% html_attr("src") %>% image_read()
node("img") %>% html_attr("src")
?extract2
url %>% html_nodes("a") %>% extract2(3)
require(rvest)
url %>% html_nodes("a") %>% extract2(3)
url %>% html_nodes("a")
url %>% read_html %>% html_nodes("a")
rmarkdown::render_site()
?read_html
??read_html
rmarkdown::render_site()
require(rvest)
require(xml2)
url <- "https://r4ds.had.co.nz/data-visualisation.html" # url to scrape
url %>% read_html # scrape HTML text and data
# scraping the first node only for third order headings ("h3")
url %>% read_html %>% html_node("h3") # get only first section heading
# scraping all nodes in the webpage
url %>% read_html %>% html_nodes("h3") # get section headings
url %>% read_html %>% html_nodes("img") # get just images
node("h1") # get first order headings
node <- function(n){
url %>% read_html %>% html_nodes(n)  # n = user defined node
}
node("h1") # get first order headings
# now pull just the text without the HTML elements
node("h2") %>% html_text(trim=T)
node("strong") %>% html_text(trim=T) # get just bold text
node("code") %>% html_text(trim = T) %>% unique %>% head(10)
node("blockquote") %>% html_text(trim = T)
url <- "https://www.imdb.com/title/tt0094625/?ref_=fn_al_tt_1"
url %>% read_html %>% html_table(trim = T)  # get just tables
url <- "https://r4ds.had.co.nz/index.html"
node("a") %>% head(20) # return first 20 results
node("section") %>% html_nodes("a") %>% html_attr("href") %>% head(20) # return first 20 results
node("section") %>% html_nodes("a") %>% html_attr("href")
node("section") %>% html_nodes("a")
node("section")
node("a") %>% head(20) # return first 20 results
node("section")
node("a")
node("a") %>% html_attr("href") %>% head(20) #
node("section") %>% html_nodes("a") %>% html_text() %>% head(20) # return first 20 results
require(rvest)
require(xml2)
url <- "https://r4ds.had.co.nz/data-visualisation.html" # url to scrape
url %>% read_html # scrape HTML text and data
# scraping the first node only for third order headings ("h3")
url %>% read_html %>% html_node("h3") # get only first section heading
# scraping all nodes in the webpage
url %>% read_html %>% html_nodes("h3") # get section headings
url %>% read_html %>% html_nodes("img") # get just images
node <- function(n){
url %>% read_html %>% html_nodes(n)  # n = user defined node
}
node <- function(n){
url %>% read_html %>% html_nodes(n)  # n = user defined node
}
node("h1") # get first order headings
# now pull just the text without the HTML elements
node("h2") %>% html_text(trim=T)
node("strong") %>% html_text(trim=T) # get just bold text
node("section") %>% html_nodes("a") %>% html_attr("href") %>% head(20) # return first 20 results
node <- function(n){
url %>% read_html %>% html_nodes(n)  # n = user defined node
}
node("section") %>% html_nodes("a") %>% html_attr("href") %>% head(20) # return first 20 results
url
node("level1") %>% html_nodes("a") %>% html_attr("href") %>% head(20) # return first 20 results
node("content") %>% html_nodes("a") %>% html_attr("href") %>% head(20) # return first 20 results
node("body") %>% html_nodes("a") %>% html_attr("href") %>% head(20) # return first 20 results
node("a") %>% head(20) # return first 20 results
url <- "https://r4ds.had.co.nz/index.html"
node("a") %>% head(20) # return first 20 results
node("section") %>% html_nodes("a") %>% html_attr("href") %>% head(20) # return first 20 results
url <- "https://r4ds.had.co.nz/index.html"
node("a") %>% head(20) # return first 20 results
url <- "https://r4ds.had.co.nz/index.html"
node("section") %>% html_nodes("a") %>% html_attr("href") %>% head(20)
url <- "https://r4ds.had.co.nz/index.html"
node("section") %>% html_nodes("a") %>% html_attr("href") %>% head(20) # return first 20 results
node("section")
node("a") %>% head(20) # return first 20 results
node("a") %>%
html_attr("href") %>% head(20) #
node("a") %>% html_nodes("a") %>% html_attr("href") %>% head(20) # return first 20 results
node("section") %>% html_nodes("a") %>% html_attr("href") %>% head(20) # return first 20 results
node("section") %>% html_nodes("a") %>% html_text() %>% head(20) # return first 20 results
node("a") %>% head(20) # return first 20 results
node("") %>% html_nodes("a") %>% html_attr("href") %>% head(20) # return first 20 results
node(" ") %>% html_nodes("a") %>% html_attr("href") %>% head(20) # return first 20 results
node("level2") %>% html_nodes("a") %>% html_attr("href") %>% head(20) # return first 20 results
node("main") %>% html_nodes("a") %>% html_attr("href") %>% head(20) # return first 20 results
node("main") %>% html_nodes("a") %>% html_text() %>% head(20) # return first 20 results
require(magrittr)
node("main") %>%
html_nodes("a") %>%
extract2(3) %>% # get the 3rd scraped term
html_text()
node("main") %>%
html_nodes("a") %>%
.[[3]] %>% # get the 3rd scraped term
html_text()
node("img") %>% html_attr("src") %>% image_read()
require(magick)
node("img") %>% html_attr("src") %>% image_read()
url <- "https://www.imdb.com/title/tt0094625/?ref_=fn_al_tt_1"
require(magick)
require(magrittr)
node("img") %>% html_attr("src") %>% extract2(3) %>% image_read()
rmarkdown::render_site()
